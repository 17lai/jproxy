import{h as I,u as ne,_ as se}from"./index.6a03fd29.js";/* empty css               *//* empty css               *//* empty css               *//* empty css              *//* empty css              *//* empty css               *//* empty css              *//* empty css               *//* empty css               *//* empty css               *//* empty css               */import{d as ie,a as i,r as q,c as ce,aI as c,A as V,B as de,aF as e,aE as t,aK as y,aL as h,u as z,aD as D,D as P,aQ as w,aX as re,aY as ue,bw as me,bx as pe,by as _e,b1 as be,bz as ve,a$ as ge,b0 as fe,bA as ye,bB as he}from"./arco.f2670ebc.js";import"./vue.758b0c86.js";function we(){return I.post("/tmdb/title/sync")}function Ie(d){return I.get("/tmdb/title/query",{params:d})}function xe(d){return I.post("/tmdb/title/remove",d)}function Ce(d){return I.post("/tmdb/title/save",d)}const Te={class:"container"},ke=ie({__name:"index",setup(d){const p=l=>{l.value=!0},_=l=>{setTimeout(()=>{l.value=!1},300)},{t:a}=ne(),x=i(!1),C=i(!1),T=i(!1),k=i(!1),u=i([]),$=i([]),A=q({type:"checkbox",showCheckedAll:!0,onlyCurrent:!1}),E=ce(()=>[{title:a("tmdb.title.tvdbId"),dataIndex:"tvdbId",align:"center",width:100,ellipsis:!0,tooltip:!0},{title:a("tmdb.title.tmdbId"),dataIndex:"tmdbId",align:"center",width:100,ellipsis:!0,tooltip:!0},{title:a("tmdb.title.language"),dataIndex:"language",align:"center",width:100,ellipsis:!0,tooltip:!0},{title:a("tmdb.title.title"),dataIndex:"title",slotName:"title",ellipsis:!0,tooltip:!0},{title:a("tmdb.title.cleanTitle"),dataIndex:"cleanTitle",ellipsis:!0,tooltip:!0},{title:a("tmdb.title.validStatus"),dataIndex:"validStatus",slotName:"validStatus",align:"center",width:100}]),b={current:1,pageSize:10},r=q({showTotal:!0,showPageSize:!0,pageSizeOptions:[10,20,100,1e3],...b}),B=()=>({tvdbId:void 0,title:void 0}),n=i(B()),v=async l=>{p(C),await Ie(l).then(s=>{$.value=s.data.list,r.current=l.current,r.total=s.data.total}).finally(()=>{_(C)})},g=()=>{p(x),v({...b,...n.value}).finally(()=>{_(x)})},Q=()=>{n.value=B()},M=l=>{v({...b,current:l,...n.value})},O=l=>{b.pageSize=l,r.pageSize=l,v({...r,...n.value})},R=()=>{if(!u.value||u.value.length===0){w.warning(a("tmdb.title.select.warning"));return}p(T),xe(u.value).then(()=>{w.success(a("tmdb.title.remove.success")),v({...r,...n.value})}).finally(()=>{_(T)})},X=()=>{p(k),we().then(()=>{w.success(a("tmdb.title.sync.success")),g()}).finally(()=>{_(k)})},Y=l=>{Ce(l).then(()=>{w.success(a("tmdb.title.save.success")),g()})};return g(),(l,s)=>{const j=c("Breadcrumb"),L=re,F=ue,m=me,G=pe,S=_e,H=be,K=ve,J=c("icon-search"),f=ge,W=c("icon-refresh"),N=fe,Z=c("icon-delete"),ee=c("icon-sync"),te=c("icon-check-circle"),le=c("icon-close-circle"),ae=ye,oe=he;return V(),de("div",Te,[e(j,{items:["menu.sonarr","menu.sonarr.tmdb"]},null,8,["items"]),e(oe,{class:"general-card",title:z(a)("menu.sonarr.tmdb")},{default:t(()=>[e(S,null,{default:t(()=>[e(m,{flex:1},{default:t(()=>[e(H,{"label-col-props":{span:5},"wrapper-col-props":{span:15},"label-align":"left",model:n.value},{default:t(()=>[e(S,{gutter:16},{default:t(()=>[e(m,{span:8},{default:t(()=>[e(F,{field:"title",label:l.$t("tmdb.title.title")},{default:t(()=>[e(L,{modelValue:n.value.title,"onUpdate:modelValue":s[0]||(s[0]=o=>n.value.title=o),"allow-clear":"",placeholder:l.$t("tmdb.title.title.placeholder")},null,8,["modelValue","placeholder"])]),_:1},8,["label"])]),_:1}),e(m,{span:8},{default:t(()=>[e(F,{field:"tvdbId","label-col-props":{span:8},label:l.$t("tmdb.title.tvdbId")},{default:t(()=>[e(G,{modelValue:n.value.tvdbId,"onUpdate:modelValue":s[1]||(s[1]=o=>n.value.tvdbId=o),min:0,"allow-clear":"",placeholder:l.$t("tmdb.title.tvdbId.placeholder")},null,8,["modelValue","placeholder"])]),_:1},8,["label"])]),_:1})]),_:1})]),_:1},8,["model"])]),_:1}),e(K,{style:{height:"35px"},direction:"vertical"}),e(m,{flex:"86px",style:{"text-align":"right"}},{default:t(()=>[e(N,{size:18},{default:t(()=>[e(f,{type:"primary",loading:x.value,onClick:g},{icon:t(()=>[e(J)]),default:t(()=>[y(" "+h(l.$t("tmdb.title.search")),1)]),_:1},8,["loading"]),e(f,{onClick:Q},{icon:t(()=>[e(W)]),default:t(()=>[y(" "+h(l.$t("tmdb.title.reset")),1)]),_:1})]),_:1})]),_:1})]),_:1}),e(K,{style:{"margin-top":"0"}}),e(S,{style:{"margin-bottom":"16px"}},{default:t(()=>[e(m,{span:12},{default:t(()=>[e(N,null,{default:t(()=>[e(f,{type:"primary",status:"danger",loading:T.value,onClick:R},{icon:t(()=>[e(Z)]),default:t(()=>[y(" "+h(l.$t("tmdb.title.remove")),1)]),_:1},8,["loading"]),e(f,{type:"primary",loading:k.value,onClick:X},{icon:t(()=>[e(ee)]),default:t(()=>[y(" "+h(l.$t("tmdb.title.sync")),1)]),_:1},8,["loading"])]),_:1})]),_:1})]),_:1}),e(ae,{selectedKeys:u.value,"onUpdate:selectedKeys":s[2]||(s[2]=o=>u.value=o),"row-key":"id",size:"medium",data:$.value,columns:z(E),bordered:!1,loading:C.value,pagination:r,"row-selection":z(A),onPageSizeChange:O,onPageChange:M},{title:t(({record:o})=>[e(L,{modelValue:o.title,"onUpdate:modelValue":U=>o.title=U,onChange:U=>Y(o)},null,8,["modelValue","onUpdate:modelValue","onChange"])]),validStatus:t(({record:o})=>[o.validStatus===1?(V(),D(te,{key:0,size:"21",style:P({color:"rgb(var(--green-6))"})},null,8,["style"])):(V(),D(le,{key:1,size:"21",style:P({color:"rgb(var(--orange-6))"})},null,8,["style"]))]),_:1},8,["selectedKeys","data","columns","loading","pagination","row-selection"])]),_:1},8,["title"])])}}});const Ee=se(ke,[["__scopeId","data-v-35615625"]]);export{Ee as default};
