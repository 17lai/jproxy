import{h as $,u as ae,_ as oe}from"./index.3b366cce.js";/* empty css               *//* empty css               *//* empty css               *//* empty css              *//* empty css              *//* empty css               *//* empty css              *//* empty css               *//* empty css               *//* empty css               *//* empty css               */import{d as ne,a as i,r as q,c as se,aI as d,A as C,B as ie,aF as e,aE as t,aK as f,aL as y,u as T,aD as D,D as N,aQ as z,aX as de,aY as ce,bw as re,bx as ue,by as me,b1 as pe,bz as _e,a$ as be,b0 as ve,bA as ge,bB as fe}from"./arco.f2670ebc.js";import"./vue.758b0c86.js";function ye(){return $.post("/tmdb/title/sync")}function he(m){return $.get("/tmdb/title/query",{params:m})}function we(m){return $.post("/tmdb/title/remove",m)}const Ie={class:"container"},xe=ne({__name:"index",setup(m){const p=l=>{l.value=!0},_=l=>{setTimeout(()=>{l.value=!1},300)},{t:a}=ae(),h=i(!1),w=i(!1),I=i(!1),x=i(!1),r=i([]),B=i([]),P=q({type:"checkbox",showCheckedAll:!0,onlyCurrent:!1}),A=se(()=>[{title:a("tmdb.title.tvdbId"),dataIndex:"tvdbId",align:"center",width:100,ellipsis:!0,tooltip:!0},{title:a("tmdb.title.tmdbId"),dataIndex:"tmdbId",align:"center",width:100,ellipsis:!0,tooltip:!0},{title:a("tmdb.title.language"),dataIndex:"language",align:"center",width:100,ellipsis:!0,tooltip:!0},{title:a("tmdb.title.title"),dataIndex:"title",ellipsis:!0,tooltip:!0},{title:a("tmdb.title.cleanTitle"),dataIndex:"cleanTitle",ellipsis:!0,tooltip:!0},{title:a("tmdb.title.validStatus"),dataIndex:"validStatus",slotName:"validStatus",align:"center",width:100}]),b={current:1,pageSize:10},c=q({showTotal:!0,showPageSize:!0,pageSizeOptions:[10,20,100,1e3],...b}),V=()=>({tvdbId:void 0,title:void 0}),o=i(V()),v=async l=>{p(w),await he(l).then(n=>{B.value=n.data.list,c.current=l.current,c.total=n.data.total}).finally(()=>{_(w)})},k=()=>{p(h),v({...b,...o.value}).finally(()=>{_(h)})},U=()=>{o.value=V()},E=l=>{v({...b,current:l,...o.value})},Q=l=>{b.pageSize=l,c.pageSize=l,v({...c,...o.value})},M=()=>{if(!r.value||r.value.length===0){z.warning(a("tmdb.title.select.warning"));return}p(I),we(r.value).then(()=>{z.success(a("tmdb.title.remove.success")),v({...c,...o.value})}).finally(()=>{_(I)})},O=()=>{p(x),ye().then(()=>{z.success(a("tmdb.title.sync.success")),k()}).finally(()=>{_(x)})};return k(),(l,n)=>{const R=d("Breadcrumb"),X=de,L=ce,u=re,Y=ue,S=me,j=pe,F=_e,G=d("icon-search"),g=be,H=d("icon-refresh"),K=ve,J=d("icon-delete"),W=d("icon-sync"),Z=d("icon-check-circle"),ee=d("icon-close-circle"),te=ge,le=fe;return C(),ie("div",Ie,[e(R,{items:["menu.sonarr","menu.sonarr.tmdb"]},null,8,["items"]),e(le,{class:"general-card",title:T(a)("menu.sonarr.tmdb")},{default:t(()=>[e(S,null,{default:t(()=>[e(u,{flex:1},{default:t(()=>[e(j,{"label-col-props":{span:5},"wrapper-col-props":{span:15},"label-align":"left",model:o.value},{default:t(()=>[e(S,{gutter:16},{default:t(()=>[e(u,{span:8},{default:t(()=>[e(L,{field:"title",label:l.$t("tmdb.title.title")},{default:t(()=>[e(X,{modelValue:o.value.title,"onUpdate:modelValue":n[0]||(n[0]=s=>o.value.title=s),"allow-clear":"",placeholder:l.$t("tmdb.title.title.placeholder")},null,8,["modelValue","placeholder"])]),_:1},8,["label"])]),_:1}),e(u,{span:8},{default:t(()=>[e(L,{field:"tvdbId","label-col-props":{span:8},label:l.$t("tmdb.title.tvdbId")},{default:t(()=>[e(Y,{modelValue:o.value.tvdbId,"onUpdate:modelValue":n[1]||(n[1]=s=>o.value.tvdbId=s),min:0,"allow-clear":"",placeholder:l.$t("tmdb.title.tvdbId.placeholder")},null,8,["modelValue","placeholder"])]),_:1},8,["label"])]),_:1})]),_:1})]),_:1},8,["model"])]),_:1}),e(F,{style:{height:"35px"},direction:"vertical"}),e(u,{flex:"86px",style:{"text-align":"right"}},{default:t(()=>[e(K,{size:18},{default:t(()=>[e(g,{type:"primary",loading:h.value,onClick:k},{icon:t(()=>[e(G)]),default:t(()=>[f(" "+y(l.$t("tmdb.title.search")),1)]),_:1},8,["loading"]),e(g,{onClick:U},{icon:t(()=>[e(H)]),default:t(()=>[f(" "+y(l.$t("tmdb.title.reset")),1)]),_:1})]),_:1})]),_:1})]),_:1}),e(F,{style:{"margin-top":"0"}}),e(S,{style:{"margin-bottom":"16px"}},{default:t(()=>[e(u,{span:12},{default:t(()=>[e(K,null,{default:t(()=>[e(g,{type:"primary",status:"danger",loading:I.value,onClick:M},{icon:t(()=>[e(J)]),default:t(()=>[f(" "+y(l.$t("tmdb.title.remove")),1)]),_:1},8,["loading"]),e(g,{type:"primary",loading:x.value,onClick:O},{icon:t(()=>[e(W)]),default:t(()=>[f(" "+y(l.$t("tmdb.title.sync")),1)]),_:1},8,["loading"])]),_:1})]),_:1})]),_:1}),e(te,{selectedKeys:r.value,"onUpdate:selectedKeys":n[2]||(n[2]=s=>r.value=s),"row-key":"id",size:"medium",data:B.value,columns:T(A),bordered:!1,loading:w.value,pagination:c,"row-selection":T(P),onPageSizeChange:Q,onPageChange:E},{validStatus:t(({record:s})=>[s.validStatus===1?(C(),D(Z,{key:0,size:"21",style:N({color:"rgb(var(--green-6))"})},null,8,["style"])):(C(),D(ee,{key:1,size:"21",style:N({color:"rgb(var(--orange-6))"})},null,8,["style"]))]),_:1},8,["selectedKeys","data","columns","loading","pagination","row-selection"])]),_:1},8,["title"])])}}});const Pe=oe(xe,[["__scopeId","data-v-dedad0d3"]]);export{Pe as default};
